<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" width="100%" height="100%" creationComplete="creationCompleteHandler()">
	
	<fx:Script>
		<![CDATA[          
			import com.cc.core.util.PopUpEffect;
			
			import mx.collections.ArrayCollection;
			import mx.core.FlexGlobals;
			
			
			
			
			private var addPop:AddServerWindow = new AddServerWindow();
			
			private function datagrid1_creationCompleteHandler():void
			{
				
			}
			
			public function initData(obj:Object):void
			{
				var list:ArrayCollection = new ArrayCollection();
				var arr:Array = JSON.parse(obj.dataList) as Array;
				if(arr == null || arr.length == 0)return;
				for each(var obj:Object in arr){
					list.addItem(obj);
				}
				myDataGrid.dataProvider = list;
			}
			
			private function addServerBtn_clickHandler(obj:Object):void
			{
				PopUpEffect.Show(addPop,this);
				
				addPop.x=FlexGlobals.topLevelApplication.stage.stageWidth/2-addPop.width/2;
				addPop.y=FlexGlobals.topLevelApplication.stage.stageHeight/2-addPop.height/2; 
				addPop.setUserInfo(obj);
			}
			
			private function creationCompleteHandler():void
			{
				
			}
			
		]]>
	</fx:Script>

	
	
	<fx:Declarations>
		<!-- 将非可视元素（例如服务、值对象）放在此处 -->
	</fx:Declarations>
	
	
	<s:Panel id="myPanel" x="0" y="0" title="服务器管理界面" width="100%" height="100%">
		<s:DataGrid id="myDataGrid" x="132" y="47" width="1500" height="800" editable="true"
					creationComplete="datagrid1_creationCompleteHandler()" requestedRowCount="4"
					textAlign="center" >
			<s:columns>
				<s:ArrayList id="arrList">
					
					<s:GridColumn width="200" headerText="操作">
						<s:headerRenderer>  
							<fx:Component>  
								<s:DefaultGridHeaderRenderer>
									<s:labelDisplay>  
										<s:Label id="labelDisplay2"  
												 verticalCenter="1" left="0" right="0" top="0" bottom="0"  
												 textAlign="center" fontWeight="bold" verticalAlign="middle"  
												 maxDisplayedLines="1" showTruncationTip="true" />  
									</s:labelDisplay>  
								</s:DefaultGridHeaderRenderer>  
							</fx:Component>  
						</s:headerRenderer>
						
						<s:itemRenderer>  
							<fx:Component>  
								<s:GridItemRenderer>  
									<fx:Script>
										<![CDATA[
											import com.cc.app.server.ServerControlEvent;
											import com.cc.app.server.serverview.ChangServerWindow;
											import com.cc.core.Globals;
											import com.cc.core.util.PopUpEffect;
											
											import mx.controls.Alert;
											import mx.core.FlexGlobals;
											import mx.events.CloseEvent;
											
											
											
											
											public var changPop:ChangServerWindow = new ChangServerWindow();
											
											public function changServerInfo():void 
											{
												//												Globals.instance.context.dispatchEvent(new UserControlEvent(UserControlEvent.GET_QUXIAN_LIST));
						
												var pop:ChangServerWindow = new ChangServerWindow();
												//												PopUpManager.addPopUp(pop,this,true);
												PopUpEffect.Show(pop,this);
												pop.x=FlexGlobals.topLevelApplication.stage.stageWidth/2-pop.width/2;
												pop.y=FlexGlobals.topLevelApplication.stage.stageHeight/2-pop.height/2; 
												pop.setUserInfo(data);
												
											}
											
											public function deleteCache():void 
											{
												Alert.yesLabel = "确定";
												Alert.noLabel = "取消";
												Alert.show("确定删除该服务器记录？","温馨提示",Alert.YES|Alert.NO,this,alertCloseHandler);
											}
											
											private function alertCloseHandler(e:CloseEvent):void
											{
												if(e.detail == Alert.YES){
													Globals.instance.context.dispatchEvent(new ServerControlEvent(ServerControlEvent.DEL_SERVER,{gameSite:data.gameSite}));
												}
											}
										]]>
									</fx:Script>
									
									<s:HGroup y="2" width="200" horizontalAlign="center">
										<s:Button label="编辑服务器" click="changServerInfo()"/>
										<s:Button label="删除服务器" click="deleteCache()"/>
									</s:HGroup>  
								</s:GridItemRenderer>
							</fx:Component>  
						</s:itemRenderer>  
					</s:GridColumn>
				
					<s:GridColumn id="serverNo" width="100" dataField="serverNo" headerText="服务器编号">
						<s:headerRenderer>  
							<fx:Component>
								<s:DefaultGridHeaderRenderer>  
									<s:labelDisplay>  
										<s:Label id="labelDisplay2"  
												 verticalCenter="1" left="0" right="0" top="0" bottom="0"  
												 textAlign="center" fontWeight="bold" verticalAlign="middle"  
												 maxDisplayedLines="1" showTruncationTip="true" />  
									</s:labelDisplay>  
								</s:DefaultGridHeaderRenderer>  
							</fx:Component>  
						</s:headerRenderer>
					</s:GridColumn>
					
					<s:GridColumn id="serverName" width="100" dataField="serverName" headerText="服务器名称">
						<s:headerRenderer>  
							<fx:Component>
								<s:DefaultGridHeaderRenderer>  
									<s:labelDisplay>  
										<s:Label id="labelDisplay2"  
												 verticalCenter="1" left="0" right="0" top="0" bottom="0"  
												 textAlign="center" fontWeight="bold" verticalAlign="middle"  
												 maxDisplayedLines="1" showTruncationTip="true" />  
									</s:labelDisplay>  
								</s:DefaultGridHeaderRenderer>  
							</fx:Component>  
						</s:headerRenderer>
					</s:GridColumn>
					
					<s:GridColumn id="agent" width="100" dataField="agent" headerText="运营商">
						<s:headerRenderer>  
							<fx:Component>
								<s:DefaultGridHeaderRenderer>  
									<s:labelDisplay>  
										<s:Label id="labelDisplay2"  
												 verticalCenter="1" left="0" right="0" top="0" bottom="0"  
												 textAlign="center" fontWeight="bold" verticalAlign="middle"  
												 maxDisplayedLines="1" showTruncationTip="true" />  
									</s:labelDisplay>  
								</s:DefaultGridHeaderRenderer>  
							</fx:Component>  
						</s:headerRenderer>
					</s:GridColumn>
					
					
					<s:GridColumn id="gameSite" width="100" dataField="gameSite" headerText="游戏站点">
						<s:headerRenderer>  
							<fx:Component>
								<s:DefaultGridHeaderRenderer>  
									<s:labelDisplay>  
										<s:Label id="labelDisplay2"  
												 verticalCenter="1" left="0" right="0" top="0" bottom="0"  
												 textAlign="center" fontWeight="bold" verticalAlign="middle"  
												 maxDisplayedLines="1" showTruncationTip="true" />  
									</s:labelDisplay>  
								</s:DefaultGridHeaderRenderer>  
							</fx:Component>  
						</s:headerRenderer>
					</s:GridColumn>
					
					
					<s:GridColumn id="gameHost" width="100" dataField="gameHost" headerText="公网IP">
						<s:headerRenderer>  
							<fx:Component>  
								<s:DefaultGridHeaderRenderer>  
									<s:labelDisplay>  
										<s:Label id="labelDisplay2"  
												 verticalCenter="1" left="0" right="0" top="0" bottom="0"  
												 textAlign="center" fontWeight="bold" verticalAlign="middle"  
												 maxDisplayedLines="1" showTruncationTip="true" />  
									</s:labelDisplay>  
								</s:DefaultGridHeaderRenderer>  
							</fx:Component>  
						</s:headerRenderer>
					</s:GridColumn>
					
					<s:GridColumn id="gameInnerIp" width="100" dataField="gameInnerIp" headerText="内网IP">
						<s:headerRenderer>  
							<fx:Component>  
								<s:DefaultGridHeaderRenderer>  
									<s:labelDisplay>  
										<s:Label id="labelDisplay2"  
												 verticalCenter="1" left="0" right="0" top="0" bottom="0"  
												 textAlign="center" fontWeight="bold" verticalAlign="middle"  
												 maxDisplayedLines="1" showTruncationTip="true" />  
									</s:labelDisplay>  
								</s:DefaultGridHeaderRenderer>  
							</fx:Component>  
						</s:headerRenderer>
					</s:GridColumn>
					
					<s:GridColumn id="gamePort" width="100" dataField="gamePort" headerText="游戏服端口">
						<s:headerRenderer>  
							<fx:Component>  
								<s:DefaultGridHeaderRenderer>  
									<s:labelDisplay>  
										<s:Label id="labelDisplay2"  
												 verticalCenter="1" left="0" right="0" top="0" bottom="0"  
												 textAlign="center" fontWeight="bold" verticalAlign="middle"  
												 maxDisplayedLines="1" showTruncationTip="true" />  
									</s:labelDisplay>  
								</s:DefaultGridHeaderRenderer>  
							</fx:Component>  
						</s:headerRenderer>
					</s:GridColumn>
					
					<s:GridColumn id="webPort" width="100" dataField="webPort" headerText="WEB服务端口">
						<s:headerRenderer>  
							<fx:Component>  
								<s:DefaultGridHeaderRenderer>  
									<s:labelDisplay>  
										<s:Label id="labelDisplay2"  
												 verticalCenter="1" left="0" right="0" top="0" bottom="0"  
												 textAlign="center" fontWeight="bold" verticalAlign="middle"  
												 maxDisplayedLines="1" showTruncationTip="true" />  
									</s:labelDisplay>  
								</s:DefaultGridHeaderRenderer>  
							</fx:Component>  
						</s:headerRenderer>
					</s:GridColumn>
				
					<s:GridColumn id="assets" width="100" dataField="assets" headerText="资源地址">
						<s:headerRenderer>  
							<fx:Component>  
								<s:DefaultGridHeaderRenderer>  
									<s:labelDisplay>  
										<s:Label id="labelDisplay2"  
												 verticalCenter="1" left="0" right="0" top="0" bottom="0"  
												 textAlign="center" fontWeight="bold" verticalAlign="middle"  
												 maxDisplayedLines="1" showTruncationTip="true"  />  
									</s:labelDisplay>  
								</s:DefaultGridHeaderRenderer>  
							</fx:Component>  
						</s:headerRenderer>
					</s:GridColumn>
					
					<s:GridColumn id="openServerDate" width="100" dataField="openServerDate" headerText="开服时间">
						<s:headerRenderer>  
							<fx:Component>  
								<s:DefaultGridHeaderRenderer>  
									<s:labelDisplay>  
										<s:Label id="labelDisplay2"  
												 verticalCenter="1" left="0" right="0" top="0" bottom="0"  
												 textAlign="center" fontWeight="bold" verticalAlign="middle"  
												 maxDisplayedLines="1" showTruncationTip="true" />  
									</s:labelDisplay>  
								</s:DefaultGridHeaderRenderer>  
							</fx:Component>  
						</s:headerRenderer>
					</s:GridColumn>
					
					<s:GridColumn id="megerServerDate" width="100" dataField="megerServerDate" headerText="合服时间">
						<s:headerRenderer>  
							<fx:Component>  
								<s:DefaultGridHeaderRenderer>  
									<s:labelDisplay>  
										<s:Label id="labelDisplay2"  
												 verticalCenter="1" left="0" right="0" top="0" bottom="0"  
												 textAlign="center" fontWeight="bold" verticalAlign="middle"  
												 maxDisplayedLines="1" showTruncationTip="true" />  
									</s:labelDisplay>  
								</s:DefaultGridHeaderRenderer>  
							</fx:Component>  
						</s:headerRenderer>
					</s:GridColumn>
					
					<s:GridColumn id="state" width="100" dataField="state" headerText="服务器是否开启">
						<s:headerRenderer>  
							<fx:Component>  
								<s:DefaultGridHeaderRenderer>  
									<s:labelDisplay>  
										<s:Label id="labelDisplay2"  
												 verticalCenter="1" left="0" right="0" top="0" bottom="0"  
												 textAlign="center" fontWeight="bold" verticalAlign="middle"  
												 maxDisplayedLines="1" showTruncationTip="true" />  
									</s:labelDisplay>  
								</s:DefaultGridHeaderRenderer>  
							</fx:Component>  
						</s:headerRenderer>
					</s:GridColumn>
					
					<s:GridColumn id="severState" width="100" dataField="severState" headerText="服务器状态">
						<s:headerRenderer>  
							<fx:Component>  
								<s:DefaultGridHeaderRenderer>  
									<s:labelDisplay>  
										<s:Label id="labelDisplay2"  
												 verticalCenter="1" left="0" right="0" top="0" bottom="0"  
												 textAlign="center" fontWeight="bold" verticalAlign="middle"  
												 maxDisplayedLines="1" showTruncationTip="true" />  
									</s:labelDisplay>  
								</s:DefaultGridHeaderRenderer>  
							</fx:Component>  
						</s:headerRenderer>
					</s:GridColumn>
					
					<s:GridColumn id="severType" width="100" dataField="severType" headerText="服务器类型(0.普通 1.新服 2.推荐)"  >
						<s:headerRenderer>  
							<fx:Component>  
								<s:DefaultGridHeaderRenderer>  
									<s:labelDisplay>  
										<s:Label id="labelDisplay2"  
												 verticalCenter="1" left="0" right="0" top="0" bottom="0"  
												 textAlign="center" fontWeight="bold" verticalAlign="middle"  
												 maxDisplayedLines="1" showTruncationTip="true" />  
									</s:labelDisplay>  
								</s:DefaultGridHeaderRenderer>  
							</fx:Component>  
						</s:headerRenderer>
					</s:GridColumn>
					

				</s:ArrayList>
			</s:columns>
<!--			<s:typicalItem>
				<fx:Object dataField1="示例数据111" dataField2="示例数据222" dataField3="示例数据333"></fx:Object>
			</s:typicalItem>
			<s:ArrayList id="arrlist">
				<fx:Object dataField1="数据1" dataField2="数据1" dataField3="数据1"></fx:Object>
				<fx:Object dataField1="数据2" dataField2="数据2" dataField3="数据2"></fx:Object>
				<fx:Object dataField1="数据3" dataField2="数据3" dataField3="数据3"></fx:Object>
				<fx:Object dataField1="数据4" dataField2="数据4" dataField3="数据4"></fx:Object>
			</s:ArrayList>-->
		</s:DataGrid>
		<s:Button id="addUserBtn" x="30" y="49" width="85" height="32" label="添加服务器" click="addServerBtn_clickHandler(myDataGrid.selectedItem)"/>
		<s:Label x="15" y="30" width="150" height="23" color="#FF0000" fontSize="12" text="注：选择一条可复制属性" fontWeight="bold"
				 textAlign="center" verticalAlign="middle"/>
		<s:Label x="500" y="7" width="371" height="32" color="#0808F7" fontSize="16" text="服务器管理" fontWeight="bold"
				 textAlign="center" verticalAlign="middle"/>
	</s:Panel>
</s:Group>
