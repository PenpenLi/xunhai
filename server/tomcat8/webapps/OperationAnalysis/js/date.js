function pickerDateRange(e,t){var n={aToday:"aToday",aYesterday:"aYesterday",aRecent7Days:"aRecent7Days",aRecent14Days:"aRecent14Days",aRecent30Days:"aRecent30Days",aRecent90Days:"aRecent90Days",startDate:"",endDate:"",startCompareDate:"",endCompareDate:"",minValidDate:"315507600",maxValidDate:"",success:function(e){return!0},startDateId:"startDate",startCompareDateId:"startCompareDate",endDateId:"endDate",endCompareDateId:"endCompareDate",target:"",needCompare:!1,suffix:"",inputTrigger:"input_trigger",compareTrigger:"compare_trigger",compareCheckboxId:"needCompare",calendars:2,dayRangeMax:0,monthRangeMax:12,dateTable:"dateRangeDateTable",selectCss:"dateRangeSelected",compareCss:"dateRangeCompare",coincideCss:"dateRangeCoincide",firstCss:"first",lastCss:"last",clickCss:"today",disableGray:"dateRangeGray",isToday:"dateRangeToday",joinLineId:"joinLine",isSingleDay:!1,defaultText:" ~ ",singleCompare:!1,stopToday:!0,isTodayValid:!1,weekendDis:!1,disCertainDay:[],disCertainDate:[],shortOpr:!1,noCalendar:!1,theme:"gri",autoCommit:!1,autoSubmit:!1,replaceBtn:"btn_compare"},r=this;this.inputId=e,this.inputCompareId=e+"Compare",this.compareInputDiv="div_compare_"+e,this.mOpts=$.extend({},n,t),this.mOpts.calendars=Math.min(this.mOpts.calendars,3),this.mOpts.compareCss=this.mOpts.theme=="ta"?this.mOpts.selectCss:this.mOpts.compareCss,this.periodObj={},this.periodObj[r.mOpts.aToday]=0,this.periodObj[r.mOpts.aYesterday]=1,this.periodObj[r.mOpts.aRecent7Days]=6,this.periodObj[r.mOpts.aRecent14Days]=13,this.periodObj[r.mOpts.aRecent30Days]=29,this.periodObj[r.mOpts.aRecent90Days]=89,this.startDefDate="";var i=""==this.mOpts.suffix?(new Date).getTime():this.mOpts.suffix;this.calendarId="calendar_"+i,this.dateListId="dateRangePicker_"+i,this.dateRangeCompareDiv="dateRangeCompareDiv_"+i,this.dateRangeDiv="dateRangeDiv_"+i,this.compareCheckBoxDiv="dateRangeCompareCheckBoxDiv_"+i,this.submitBtn="submit_"+i,this.closeBtn="closeBtn_"+i,this.preMonth="dateRangePreMonth_"+i,this.nextMonth="dateRangeNextMonth_"+i,this.startDateId=this.mOpts.startDateId+"_"+i,this.endDateId=this.mOpts.endDateId+"_"+i,this.compareCheckboxId=this.mOpts.compareCheckboxId+"_"+i,this.startCompareDateId=this.mOpts.startCompareDateId+"_"+i,this.endCompareDateId=this.mOpts.endCompareDateId+"_"+i;var s={gri:['<div id="'+this.calendarId+'" class="gri_dateRangeCalendar">','<table class="gri_dateRangePicker"><tr id="'+this.dateListId+'"></tr></table>','<div class="gri_dateRangeOptions" '+(this.mOpts.autoSubmit?' style="display:none" ':"")+">",'<div class="gri_dateRangeInput" id="'+this.dateRangeDiv+'" >','<input type="text" class="gri_dateRangeInput" name="'+this.startDateId+'" id="'+this.startDateId+'" value="'+this.mOpts.startDate+'" readonly />','<span id="'+this.mOpts.joinLineId+'"> - </span>','<input type="text" class="gri_dateRangeInput" name="'+this.endDateId+'" id="'+this.endDateId+'" value="'+this.mOpts.endDate+'" readonly /><br />',"</div>",'<div class="gri_dateRangeInput" id="'+this.dateRangeCompareDiv+'">','<input type="text" class="gri_dateRangeInput" name="'+this.startCompareDateId+'" id="'+this.startCompareDateId+'" value="'+this.mOpts.startCompareDate+'" readonly />','<span class="'+this.mOpts.joinLineId+'"> - </span>','<input type="text" class="gri_dateRangeInput" name="'+this.endCompareDateId+'" id="'+this.endCompareDateId+'" value="'+this.mOpts.endCompareDate+'" readonly />',"</div>","<div>",'<input type="button" name="'+this.submitBtn+'" id="'+this.submitBtn+'" value="'+$.i18n.prop("Data.OK")+'" />','&nbsp;<a id="'+this.closeBtn+'" href="javascript:;">'+$.i18n.prop("Data.Cancel")+"</a>","</div>","</div>","</div>"],ta:['<div id="'+this.calendarId+'" class="ta_calendar ta_calendar2 cf">','<div class="ta_calendar_cont cf" id="'+this.dateListId+'">',"</div>",'<div class="ta_calendar_footer cf" '+(this.mOpts.autoSubmit?' style="display:none" ':"")+">",'<div class="frm_msg">','<div id="'+this.dateRangeDiv+'">','<input type="text" class="ta_ipt_text_s" name="'+this.startDateId+'" id="'+this.startDateId+'" value="'+this.mOpts.startDate+'" readonly />','<span class="'+this.mOpts.joinLineId+'"> - </span>','<input type="text" class="ta_ipt_text_s" name="'+this.endDateId+'" id="'+this.endDateId+'" value="'+this.mOpts.endDate+'" readonly /><br />',"</div>",'<div id="'+this.dateRangeCompareDiv+'">','<input type="text" class="ta_ipt_text_s" name="'+this.startCompareDateId+'" id="'+this.startCompareDateId+'" value="'+this.mOpts.startCompareDate+'" readonly />','<span class="'+this.mOpts.joinLineId+'"> - </span>','<input type="text" class="ta_ipt_text_s" name="'+this.endCompareDateId+'" id="'+this.endCompareDateId+'" value="'+this.mOpts.endCompareDate+'" readonly />',"</div>","</div>",'<div class="frm_btn">','<input class="ta_btn ta_btn_primary" type="button" name="'+this.submitBtn+'" id="'+this.submitBtn+'" value="'+$.i18n.prop("Data.OK")+'" />','<input class="ta_btn" type="button" id="'+this.closeBtn+'" value="'+$.i18n.prop("Data.Cancel")+'"/>',"</div>","</div>","</div>"]},o={gri:['<label class="gri_contrast" for ="'+this.compareCheckboxId+'">','<input type="checkbox" class="gri_pc" name="'+this.compareCheckboxId+'" id="'+this.compareCheckboxId+'" value="1"/>�Ա�',"</label>",'<input type="text" name="'+this.inputCompareId+'" id="'+this.inputCompareId+'" value="" class="gri_date"/>'],ta:['<label class="contrast" for ="'+this.compareCheckboxId+'">','<input type="checkbox" class="pc" name="'+this.compareCheckboxId+'" id="'+this.compareCheckboxId+'" value="1"/>�Ա�',"</label>",'<div class="ta_date" id="'+this.compareInputDiv+'">','	<span name="dateCompare" id="'+this.inputCompareId+'" class="date_title"></span>','	<a class="opt_sel" id="'+this.mOpts.compareTrigger+'" href="#">','		<i class="i_orderd"></i>',"	</a>","</div>"]};this.mOpts.theme=="ta"?$(o[this.mOpts.theme].join("")).insertAfter($("#div_"+this.inputId)):$(o[this.mOpts.theme].join("")).insertAfter($("#"+this.inputId)),this.mOpts.noCalendar&&($("#"+this.inputId).css("display","none"),$("#"+this.compareCheckboxId).parent().css("display","none")),$(0<$("#appendParent").length?"#appendParent":document.body).append(s[this.mOpts.theme].join("")),$("#"+this.calendarId).css("z-index",9999),1>$("#"+this.mOpts.startDateId).length?$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="hidden" id="'+this.mOpts.startDateId+'" name="'+this.mOpts.startDateId+'" value="'+this.mOpts.startDate+'" />'):$("#"+this.mOpts.startDateId).val(this.mOpts.startDate),1>$("#"+this.mOpts.endDateId).length?$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="hidden" id="'+this.mOpts.endDateId+'" name="'+this.mOpts.endDateId+'" value="'+this.mOpts.endDate+'" />'):$("#"+this.mOpts.endDateId).val(this.mOpts.endDate),1>$("#"+this.mOpts.compareCheckboxId).length&&$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="checkbox" id="'+this.mOpts.compareCheckboxId+'" name="'+this.mOpts.compareCheckboxId+'" value="0" style="display:none;" />'),0==this.mOpts.needCompare?($("#"+this.compareInputDiv).css("display","none"),$("#"+this.compareCheckBoxDiv).css("display","none"),$("#"+this.dateRangeCompareDiv).css("display","none"),$("#"+this.compareCheckboxId).attr("disabled",!0),$("#"+this.startCompareDateId).attr("disabled",!0),$("#"+this.endCompareDateId).attr("disabled",!0),$("#"+this.compareCheckboxId).parent().css("display","none"),$("#"+this.mOpts.replaceBtn).length>0&&$("#"+this.mOpts.replaceBtn).hide()):(1>$("#"+this.mOpts.startCompareDateId).length?$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="hidden" id="'+this.mOpts.startCompareDateId+'" name="'+this.mOpts.startCompareDateId+'" value="'+this.mOpts.startCompareDate+'" />'):$("#"+this.mOpts.startCompareDateId).val(this.mOpts.startCompareDate),1>$("#"+this.mOpts.endCompareDateId).length?$(""!=this.mOpts.target?"#"+this.mOpts.target:"body").append('<input type="hidden" id="'+this.mOpts.endCompareDateId+'" name="'+this.mOpts.endCompareDateId+'" value="'+this.mOpts.endCompareDate+'" />'):$("#"+this.mOpts.endCompareDateId).val(this.mOpts.endCompareDate),""==this.mOpts.startCompareDate||""==this.mOpts.endCompareDate?($("#"+this.compareCheckboxId).attr("checked",!1),$("#"+this.mOpts.compareCheckboxId).attr("checked",!1)):($("#"+this.compareCheckboxId).attr("checked",!0),$("#"+this.mOpts.compareCheckboxId).attr("checked",!0))),this.dateInput=this.startDateId,this.changeInput(this.dateInput),$("#"+this.startDateId).bind("click",function(){return r.endCompareDateId==r.dateInput&&$("#"+r.startCompareDateId).val(r.startDefDate),r.startDefDate="",r.removeCSS(1),r.changeInput(r.startDateId),!1}),$("#"+this.calendarId).bind("click",function(e){e.stopPropagation()}),$("#"+this.startCompareDateId).bind("click",function(){return r.endDateId==r.dateInput&&$("#"+r.startDateId).val(r.startDefDate),r.startDefDate="",r.removeCSS(0),r.changeInput(r.startCompareDateId),!1}),$("#"+this.submitBtn).bind("click",function(){return r.close(1),r.mOpts.success({startDate:$("#"+r.mOpts.startDateId).val(),endDate:$("#"+r.mOpts.endDateId).val(),needCompare:$("#"+r.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+r.mOpts.startCompareDateId).val(),endCompareDate:$("#"+r.mOpts.endCompareDateId).val()}),!1}),$("#"+this.closeBtn).bind("click",function(){return r.close(),!1}),$("#"+this.inputId).bind("click",function(){return r.init(),r.show(!1,r),!1}),$("#"+this.mOpts.inputTrigger).bind("click",function(){return r.init(),r.show(!1,r),!1}),$("#"+this.mOpts.compareTrigger).bind("click",function(){return r.init(!0),r.show(!0,r),!1}),$("#"+this.inputCompareId).bind("click",function(){return r.init(!0),r.show(!0,r),!1}),this.mOpts.singleCompare&&(this.mOpts.theme==="ta"?($("#"+r.startDateId).val(r.mOpts.startDate),$("#"+r.endDateId).val(r.mOpts.startDate),$("#"+r.startCompareDateId).val(r.mOpts.startCompareDate),$("#"+r.endCompareDateId).val(r.mOpts.startCompareDate)):($("#"+r.startDateId).val(r.mOpts.startDate),$("#"+r.endDateId).val(r.mOpts.startDate),$("#"+r.startCompareDateId).val(r.mOpts.startCompareDate),$("#"+r.endCompareDateId).val(r.mOpts.startCompareDate),$("#"+this.compareCheckboxId).attr("checked",!0),$("#"+this.mOpts.compareCheckboxId).attr("checked",!0))),$("#"+this.dateRangeCompareDiv).css("display",$("#"+this.compareCheckboxId).attr("checked")?"":"none"),$("#"+this.compareInputDiv).css("display",$("#"+this.compareCheckboxId).attr("checked")?"":"none"),$("#"+this.compareCheckboxId).bind("click",function(){$("#"+r.inputCompareId).css("display",this.checked?"":"none"),$("#"+r.dateRangeCompareDiv).css("display",this.checked?"":"none"),$("#"+r.compareInputDiv).css("display",this.checked?"":"none"),$("#"+r.startCompareDateId).css("disabled",this.checked?!1:!0),$("#"+r.endCompareDateId).css("disabled",this.checked?!1:!0),$("#"+r.mOpts.compareCheckboxId).attr("checked",$("#"+r.compareCheckboxId).attr("checked")),$("#"+r.mOpts.compareCheckboxId).val($("#"+r.compareCheckboxId).attr("checked")?1:0);if($("#"+r.compareCheckboxId).attr("checked")){sDate=r.str2date($("#"+r.startDateId).val()),sTime=sDate.getTime(),eDate=r.str2date($("#"+r.endDateId).val()),eTime=eDate.getTime(),scDate=$("#"+r.startCompareDateId).val(),ecDate=$("#"+r.endCompareDateId).val();if(""==scDate||""==ecDate)ecDate=r.str2date(r.date2ymd(sDate).join("-")),ecDate.setDate(ecDate.getDate()-1),scDate=r.str2date(r.date2ymd(sDate).join("-")),scDate.setDate(scDate.getDate()-(eTime-sTime)/864e5-1),ecDate.getTime()<r.mOpts.minValidDate*1e3&&(scDate=sDate,ecDate=eDate),ecDate.getTime()>=r.mOpts.minValidDate*1e3&&scDate.getTime()<r.mOpts.minValidDate*1e3&&(scDate.setTime(r.mOpts.minValidDate*1e3),scDate=r.str2date(r.date2ymd(scDate).join("-")),ecDate.setDate(scDate.getDate()+(eTime-sTime)/864e5-1)),$("#"+r.startCompareDateId).val(r.formatDate(r.date2ymd(scDate).join("-"))),$("#"+r.endCompareDateId).val(r.formatDate(r.date2ymd(ecDate).join("-")));r.addCSS(1),r.changeInput(r.startCompareDateId)}else r.removeCSS(1),r.changeInput(r.startDateId);r.close(1),r.mOpts.success({startDate:$("#"+r.mOpts.startDateId).val(),endDate:$("#"+r.mOpts.endDateId).val(),needCompare:$("#"+r.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+r.mOpts.startCompareDateId).val(),endCompareDate:$("#"+r.mOpts.endCompareDateId).val()})}),this.init(),this.close(1),this.mOpts.replaceBtn&&$("#"+this.mOpts.replaceBtn).length>0&&($("#"+r.compareCheckboxId).hide(),$(".contrast").hide(),$("#"+this.mOpts.replaceBtn).bind("click",function(){var e=this;$("#"+r.compareCheckboxId).attr("checked")?$("#"+r.compareCheckboxId).removeAttr("checked"):$("#"+r.compareCheckboxId).attr("checked","checked"),$("#"+r.compareCheckboxId).click(),$("#"+r.compareCheckboxId).attr("checked")?function(){$("#"+r.compareCheckboxId).removeAttr("checked"),$(".contrast").hide(),$(e).text("��ʱ��Ա�")}():function(){$("#"+r.compareCheckboxId).attr("checked","checked"),$(".contrast").show(),$(e).text("ȡ��Ա�")}()})),this.mOpts.autoCommit&&this.mOpts.success({startDate:$("#"+r.mOpts.startDateId).val(),endDate:$("#"+r.mOpts.endDateId).val(),needCompare:$("#"+r.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+r.mOpts.startCompareDateId).val(),endCompareDate:$("#"+r.mOpts.endCompareDateId).val()}),$(document).bind("click",function(){r.close()})}pickerDateRange.prototype.init=function(e){var t=this,n,r,i=typeof e!="undefined"?e&&$("#"+t.compareCheckboxId).attr("checked"):$("#"+t.compareCheckboxId).attr("checked");$("#"+this.dateListId).empty();var s=""==this.mOpts.endDate?new Date:this.str2date(this.mOpts.endDate);this.calendar_endDate=new Date(s.getFullYear(),s.getMonth()+1,0);for(var o=0;o<this.mOpts.calendars;o++){var u=null;this.mOpts.theme=="ta"?u=this.fillDate(s.getFullYear(),s.getMonth(),o):(u=document.createElement("td"),$(u).append(this.fillDate(s.getFullYear(),s.getMonth(),o)),$(u).css("vertical-align","top"));if(0==o)$("#"+this.dateListId).append(u);else{var a=this.mOpts.theme=="ta"?$("#"+this.dateListId).find("table").get(0):$("#"+this.dateListId).find("td").get(0);$(a).before(u)}s.setMonth(s.getMonth()-1,1)}$("#"+this.preMonth).bind("click",function(){return t.calendar_endDate.setMonth(t.calendar_endDate.getMonth()-1,1),t.mOpts.endDate=t.date2ymd(t.calendar_endDate).join("-"),t.init(e),1==t.mOpts.calendars&&(""==$("#"+t.startDateId).val()?t.changeInput(t.startDateId):t.changeInput(t.endDateId)),!1}),$("#"+this.nextMonth).bind("click",function(){return t.calendar_endDate.setMonth(t.calendar_endDate.getMonth()+1,1),t.mOpts.endDate=t.date2ymd(t.calendar_endDate).join("-"),t.init(e),1==t.mOpts.calendars&&(""==$("#"+t.startDateId).val()?t.changeInput(t.startDateId):t.changeInput(t.endDateId)),!1}),this.calendar_startDate=new Date(s.getFullYear(),s.getMonth()+1,1),this.endDateId!=this.dateInput&&this.endCompareDateId!=this.dateInput&&(i&&typeof e!="undefined"?this.addCSS(1):this.addCSS(0)),i&&typeof e!="undefined"?t.addCSS(1):t.addCSS(0),$("#"+t.inputCompareId).css("display",i?"":"none"),$("#"+this.compareInputDiv).css("display",$("#"+this.compareCheckboxId).attr("checked")?"":"none");for(var f in t.periodObj)$("#"+f).length>0&&($("#"+f).unbind("click"),$("#"+f).bind("click",function(){var e=t.mOpts.theme=="ta"?"active":"a";$(this).parent().nextAll().removeClass(e),$(this).parent().prevAll().removeClass(e),$(this).parent().addClass(e);var n=t.getSpecialPeriod(t.periodObj[$(this).attr("id")]);$("#"+t.startDateId).val(t.formatDate(n.otherday)),$("#"+t.endDateId).val(t.formatDate(n.today)),$("#"+t.mOpts.startDateId).val($("#"+t.startDateId).val()),$("#"+t.mOpts.endDateId).val($("#"+t.endDateId).val()),t.mOpts.theme=="ta"?$("#"+t.compareInputDiv).hide():$("#"+t.inputCompareId).css("display","none"),$("#"+t.compareCheckboxId).attr("checked",!1),$("#"+t.mOpts.compareCheckboxId).attr("checked",!1),$("#"+this.compareInputDiv).css("display",$("#"+this.compareCheckboxId).attr("checked")?"":"none"),t.close(1),$("#"+t.startCompareDateId).val(""),$("#"+t.endCompareDateId).val(""),$("#"+t.mOpts.startCompareDateId).val(""),$("#"+t.mOpts.endCompareDateId).val(""),$("#"+t.mOpts.compareCheckboxId).val(0),$("#"+t.mOpts.replaceBtn).length>0&&($(".contrast").hide(),$("#"+t.mOpts.replaceBtn).text("��ʱ��Ա�")),t.mOpts.success({startDate:$("#"+t.mOpts.startDateId).val(),endDate:$("#"+t.mOpts.endDateId).val(),needCompare:$("#"+t.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+t.mOpts.startCompareDateId).val(),endCompareDate:$("#"+t.mOpts.endCompareDateId).val()})}));$(document).bind("click",function(){t.close()}),$("#"+this.inputId).bind("change",function(){$(this).val()===""&&($("#"+t.startDateId).val(""),$("#"+t.endDateId).val(""),$("#"+t.startCompareDateId).val(""),$("#"+t.endCompareDateId).val(""))})},pickerDateRange.prototype.getSpecialPeriod=function(e){var t=this,n=new Date;1==t.mOpts.isTodayValid&&""!=t.mOpts.isTodayValid||2>e?"":n.setTime(n.getTime()-864e5);var r=n.getTime()-e*24*60*60*1e3<t.mOpts.minValidDate*1e3?t.mOpts.minValidDate*1e3:n.getTime()-e*24*60*60*1e3,i=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate();n.setTime(r);var s=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate();return e==t.periodObj.aYesterday&&(i=s),{today:i,otherday:s}},pickerDateRange.prototype.removeCSS=function(e,t){"undefined"==typeof t&&(t=this.mOpts.theme+"_"+this.mOpts.coincideCss),"undefined"==typeof e&&(e=0);var n=new Date(this.calendar_startDate.getFullYear(),this.calendar_startDate.getMonth(),this.calendar_startDate.getDate()),r="";for(var i=new Date(n);i.getTime()<=this.calendar_endDate.getTime();i.setDate(i.getDate()+1))0==e?r=this.mOpts.theme+"_"+this.mOpts.selectCss:r=this.mOpts.theme+"_"+this.mOpts.compareCss,$("#"+this.calendarId+"_"+this.date2ymd(i).join("-")).removeClass(r),$("#"+this.calendarId+"_"+this.date2ymd(i).join("-")).removeClass(this.mOpts.firstCss).removeClass(this.mOpts.lastCss).removeClass(this.mOpts.clickCss)},pickerDateRange.prototype.addCSS=function(e,t){"undefined"==typeof t&&(t=this.mOpts.theme+"_"+this.mOpts.coincideCss),"undefined"==typeof e&&(e=0);var n=this.str2date($("#"+this.startDateId).val()),r=this.str2date($("#"+this.endDateId).val()),i=this.str2date($("#"+this.startCompareDateId).val()),s=this.str2date($("#"+this.endCompareDateId).val()),o=0==e?n:i,u=0==e?r:s,a="";for(var f=new Date(o);f.getTime()<=u.getTime();f.setDate(f.getDate()+1))0==e?(a=this.mOpts.theme+"_"+this.mOpts.selectCss,$("#"+this.calendarId+"_"+this.date2ymd(f).join("-")).removeClass(this.mOpts.firstCss).removeClass(this.mOpts.lastCss).removeClass(this.mOpts.clickCss),$("#"+this.calendarId+"_"+this.date2ymd(f).join("-")).removeClass(a)):a=this.mOpts.theme+"_"+this.mOpts.compareCss,$("#"+this.calendarId+"_"+this.date2ymd(f).join("-")).attr("class",a);this.mOpts.theme=="ta"&&($("#"+this.calendarId+"_"+this.date2ymd(new Date(o)).join("-")).removeClass().addClass(this.mOpts.firstCss),$("#"+this.calendarId+"_"+this.date2ymd(new Date(u)).join("-")).removeClass().addClass(this.mOpts.lastCss),o.getTime()==u.getTime()&&$("#"+this.calendarId+"_"+this.date2ymd(new Date(u)).join("-")).removeClass().addClass(this.mOpts.clickCss))},pickerDateRange.prototype.checkDateRange=function(e,t){var n=this.str2date(e),r=this.str2date(t),i=n.getTime(),s=r.getTime(),o,u;if(s>=i){u=this.str2date(e),u.setMonth(u.getMonth()+this.mOpts.monthRangeMax),u.setDate(u.getDate()+this.mOpts.dayRangeMax-1);if(u.getTime()<s)return alert("�������ڲ��ܴ��ڣ�"+this.date2ymd(u).join("-")),!1}else{u=this.str2date(e),u.setMonth(u.getMonth()-this.mOpts.monthRangeMax),u.setDate(u.getDate()-this.mOpts.dayRangeMax+1);if(u.getTime()>s)return alert("��ʼ���ڲ���С�ڣ�"+this.date2ymd(u).join("-")),!1}return!0},pickerDateRange.prototype.selectDate=function(e){this.changeInput(this.dateInput);var t=this.formatDate(e);if(this.startDateId==this.dateInput)this.removeCSS(0),this.removeCSS(1),$("#"+this.calendarId+"_"+e).attr("class",this.mOpts.theme=="ta"?this.mOpts.clickCss:this.mOpts.theme+"_"+this.mOpts.selectCss),this.startDefDate=$("#"+this.dateInput).val(),$("#"+this.dateInput).val(t),1==this.mOpts.singleCompare||1==this.mOpts.isSingleDay?(this.dateInput=this.startDateId,$("#"+this.endDateId).val(t),(this.mOpts.shortOpr||this.mOpts.autoSubmit)&&this.close(1),this.mOpts.success({startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()})):this.dateInput=this.endDateId;else if(this.endDateId==this.dateInput){if(""==$("#"+this.startDateId).val())return this.dateInput=this.startDateId,this.selectDate(e),!1;if(0==this.checkDateRange($("#"+this.startDateId).val(),e))return!1;-1==this.compareStrDate(e,$("#"+this.startDateId).val())&&($("#"+this.dateInput).val($("#"+this.startDateId).val()),$("#"+this.startDateId).val(t),t=$("#"+this.dateInput).val()),$("#"+this.dateInput).val(t),this.dateInput=this.startDateId,this.removeCSS(0),this.addCSS(0),this.startDefDate="",this.mOpts.autoSubmit&&(this.close(1),this.mOpts.success({startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()}))}else if(this.startCompareDateId==this.dateInput)this.removeCSS(1),this.removeCSS(0),$("#"+this.calendarId+"_"+e).attr("class",this.mOpts.theme=="ta"?this.mOpts.clickCss:this.mOpts.theme+"_"+this.mOpts.compareCss),this.startDefDate=$("#"+this.dateInput).val(),$("#"+this.dateInput).val(t),1==this.mOpts.singleCompare||1==this.mOpts.isSingleDay?(this.dateInput=this.startCompareDateId,$("#"+this.endCompareDateId).val(t),(this.mOpts.shortOpr||this.mOpts.autoSubmit)&&this.close(1),this.mOpts.success({startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()})):this.dateInput=this.endCompareDateId;else if(this.endCompareDateId==this.dateInput){if(""==$("#"+this.startCompareDateId).val())return this.dateInput=this.startCompareDateId,this.selectDate(e),!1;if(0==this.checkDateRange($("#"+this.startCompareDateId).val(),e))return!1;-1==this.compareStrDate(e,$("#"+this.startCompareDateId).val())&&($("#"+this.dateInput).val($("#"+this.startCompareDateId).val()),$("#"+this.startCompareDateId).val(t),t=$("#"+this.dateInput).val()),$("#"+this.dateInput).val(t),this.dateInput=this.startCompareDateId,this.removeCSS(1),this.addCSS(1),this.startDefDate="",this.mOpts.autoSubmit&&(this.close(1),this.mOpts.success({startDate:$("#"+this.mOpts.startDateId).val(),endDate:$("#"+this.mOpts.endDateId).val(),needCompare:$("#"+this.mOpts.compareCheckboxId).val(),startCompareDate:$("#"+this.mOpts.startCompareDateId).val(),endCompareDate:$("#"+this.mOpts.endCompareDateId).val()}))}},pickerDateRange.prototype.show=function(e,t){$("#"+t.dateRangeDiv).css("display",e?"none":""),$("#"+t.dateRangeCompareDiv).css("display",e?"":"none");var n=e?$("#"+this.inputCompareId).offset():$("#"+this.inputId).offset(),r=e?$("#"+this.inputCompareId).height():$("#"+this.inputId).height(),i=parseInt($(document.body)[0].clientWidth),s=n.left;$("#"+this.calendarId).css("display","block");if(1==this.mOpts.singleCompare||1==this.mOpts.isSingleDay)$("#"+this.endDateId).css("display","none"),$("#"+this.endCompareDateId).css("display","none"),$("#"+this.mOpts.joinLineId).css("display","none"),$("."+this.mOpts.joinLineId).css("display","none");return 0<i&&$("#"+this.calendarId).width()+n.left>i&&(s=n.left+$("#"+this.inputId).width()-$("#"+this.calendarId).width()+(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)?5:0),t.mOpts.theme=="ta"&&(s+=50)),$("#"+this.calendarId).css("left",s+"px"),$("#"+this.calendarId).css("top",n.top+(t.mOpts.theme=="ta"?35:22)+"px"),e?this.changeInput(this.startCompareDateId):this.changeInput(this.startDateId),!1},pickerDateRange.prototype.close=function(e){if(e){this.mOpts.shortOpr===!0?($("#"+this.inputId).val($("#"+this.startDateId).val()),$("#"+this.inputCompareId).val($("#"+this.startCompareDateId).val())):$("#"+this.inputId).val($("#"+this.startDateId).val()+(""==$("#"+this.endDateId).val()?"":this.mOpts.defaultText+$("#"+this.endDateId).val()));var t=1==this.mOpts.isTodayValid&&""!=this.mOpts.isTodayValid?(new Date).getTime():(new Date).getTime()-864e5,n=this.str2date($("#"+this.startDateId).val()).getTime(),r=this.str2date($("#"+this.endDateId).val()).getTime();if(r<n){var i=$("#"+this.startDateId).val();$("#"+this.startDateId).val($("#"+this.endDateId).val()),$("#"+this.endDateId).val(i)}var s=this.mOpts.shortOpr==1?$("#"+this.startDateId).val():$("#"+this.startDateId).val()+(""==$("#"+this.endDateId).val()?"":this.mOpts.defaultText+$("#"+this.endDateId).val()),o=document.getElementById(this.inputId);o&&o.tagName=="INPUT"?($("#"+this.inputId).val(s),$("#"+this.inputCompareId).is(":visible")&&$("#"+this.inputCompareId).val(l)):($("#"+this.inputId).html(s),$("#"+this.inputCompareId).is(":visible")&&$("#"+this.inputCompareId).html(l));if(this.mOpts.theme!="ta"&&""!=$("#"+this.startCompareDateId).val()&&""!=$("#"+this.endCompareDateId).val()){var u=this.str2date($("#"+this.startCompareDateId).val()).getTime(),a=this.str2date($("#"+this.endCompareDateId).val()).getTime(),f=u+r-n;f>t&&(f=t,$("#"+this.startCompareDateId).val(this.formatDate(this.date2ymd(new Date(f+n-r)).join("-")))),$("#"+this.endCompareDateId).val(this.formatDate(this.date2ymd(new Date(f)).join("-")));var u=this.str2date($("#"+this.startCompareDateId).val()).getTime(),a=this.str2date($("#"+this.endCompareDateId).val()).getTime();if(a<u){var i=$("#"+this.startCompareDateId).val();$("#"+this.startCompareDateId).val($("#"+this.endCompareDateId).val()),$("#"+this.endCompareDateId).val(i)}}var l=this.mOpts.shortOpr==1?$("#"+this.startCompareDateId).val():$("#"+this.startCompareDateId).val()+(""==$("#"+this.endCompareDateId).val()?"":this.mOpts.defaultText+$("#"+this.endCompareDateId).val());o&&o.tagName=="INPUT"?$("#"+this.inputCompareId).val(l):$("#"+this.inputCompareId).html(l);var c=(n-r)/864e5;$("#"+this.mOpts.startDateId).val($("#"+this.startDateId).val()),$("#"+this.mOpts.endDateId).val($("#"+this.endDateId).val()),$("#"+this.mOpts.startCompareDateId).val($("#"+this.startCompareDateId).val()),$("#"+this.mOpts.endCompareDateId).val($("#"+this.endCompareDateId).val());for(var h in this.periodObj)$("#"+this.mOpts[h])&&$("#"+this.mOpts[h]).parent().removeClass("a")}return $("#"+this.calendarId).css("display","none"),!1},pickerDateRange.prototype.fillDate=function(e,t,n){var r=this,i=this.mOpts.theme=="ta",s=new Date(e,t,1),o=new Date(e,t,1),u=o.getDay();o.setDate(1-u);var a=new Date(e,t+1,0),f=new Date(e,t+1,0);u=f.getDay(),f.setDate(f.getDate()+6-u);var l=new Date,c=l.getDate(),h=l.getMonth(),p=l.getFullYear(),d=document.createElement("table");if(i){d.className=this.mOpts.dateTable,cap=document.createElement("caption"),$(cap).append(e+"��"+(t+1)+"��"),$(d).append(cap),thead=document.createElement("thead"),tr=document.createElement("tr");var v=["��","һ","��","��","��","��","��"];for(var m=0;m<7;m++)th=document.createElement("th"),$(th).append(v[m]),$(tr).append(th);$(thead).append(tr),$(d).append(thead),tr=document.createElement("tr");var g=document.createElement("td");0==n&&$(g).append('<a href="javascript:void(0);" id="'+this.nextMonth+'"><i class="i_next"></i></a>'),n+1==this.mOpts.calendars&&$(g).append('<a href="javascript:void(0);" id="'+this.preMonth+'"><i class="i_pre"></i></a>'),$(g).attr("colSpan",7),$(g).css("text-align","center"),$(tr).append(g),$(d).append(tr)}else{d.className=this.mOpts.theme+"_"+this.mOpts.dateTable,tr=document.createElement("tr"),g=document.createElement("td"),0==n&&$(g).append('<a href="javascript:void(0);" id="'+this.nextMonth+'" class="gri_dateRangeNextMonth"><span>next</span></a>'),n+1==this.mOpts.calendars&&$(g).append('<a href="javascript:void(0);" id="'+this.preMonth+'" class="gri_dateRangePreMonth"><span>pre</span></a>'),$(g).append(e+"��"+(t+1)+"��"),$(g).attr("colSpan",7),$(g).css("text-align","center"),$(g).css("background-color","#F9F9F9"),$(tr).append(g),$(d).append(tr);var v=["��","һ","��","��","��","��","��"];tr=document.createElement("tr");for(var m=0;m<7;m++)g=document.createElement("td"),$(g).append(v[m]),$(tr).append(g);$(d).append(tr)}var y="",b=0,w="";for(var E=o;E.getTime()<=f.getTime();E.setDate(E.getDate()+1)){if(E.getTime()<s.getTime())y=this.mOpts.theme+"_"+this.mOpts.disableGray,b="-1";else if(E.getTime()>a.getTime())y=this.mOpts.theme+"_"+this.mOpts.disableGray,b="1";else if(this.mOpts.stopToday==1&&E.getTime()>l.getTime()||E.getTime()<r.mOpts.minValidDate*1e3||""!==r.mOpts.maxValidDate&&E.getTime()>r.mOpts.maxValidDate*1e3)y=this.mOpts.theme+"_"+this.mOpts.disableGray,b="2";else{b="0",E.getDate()==c&&E.getMonth()==h&&E.getFullYear()==p?1==this.mOpts.isTodayValid?y=this.mOpts.theme+"_"+this.mOpts.isToday:(y=this.mOpts.theme+"_"+this.mOpts.disableGray,b="2"):y="",this.mOpts.weekendDis&&(E.getDay()==6||E.getDay()==0)&&(y=this.mOpts.theme+"_"+this.mOpts.disableGray,b="3");if(this.mOpts.disCertainDay&&this.mOpts.disCertainDay.length>0)for(var S in this.mOpts.disCertainDay)!isNaN(this.mOpts.disCertainDay[S])&&E.getDay()===this.mOpts.disCertainDay[S]&&(y=this.mOpts.theme+"_"+this.mOpts.disableGray,b="4");if(this.mOpts.disCertainDate&&this.mOpts.disCertainDate.length>0){var x=!1;for(var S in this.mOpts.disCertainDate)if(!isNaN(this.mOpts.disCertainDate[S])||isNaN(parseInt(this.mOpts.disCertainDate[S])))if(this.mOpts.disCertainDate[0]===!0){x=E.getDate()!==this.mOpts.disCertainDate[S];if(!x)break}else{x=E.getDate()===this.mOpts.disCertainDate[S];if(x)break}x&&(y=this.mOpts.theme+"_"+this.mOpts.disableGray,b="4")}}0==E.getDay()&&(tr=document.createElement("tr")),g=document.createElement("td"),g.innerHTML=E.getDate(),""!=y&&$(g).attr("class",y),0==b&&(w=E.getFullYear()+"-"+(E.getMonth()+1)+"-"+E.getDate(),$(g).attr("id",r.calendarId+"_"+w),$(g).css("cursor","pointer"),function(e){$(g).bind("click",e,function(){return r.selectDate(e),!1})}(w)),$(tr).append(g),6==E.getDay()&&$(d).append(tr)}return d},pickerDateRange.prototype.str2date=function(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2])},pickerDateRange.prototype.compareStrDate=function(e,t){var n=this.str2date(e),r=this.str2date(t);return n.getTime()>r.getTime()?1:n.getTime()==r.getTime()?0:-1},pickerDateRange.prototype.date2ymd=function(e){return[e.getFullYear(),e.getMonth()+1,e.getDate()]},pickerDateRange.prototype.changeInput=function(e){1==this.mOpts.isSingleDay&&(e=this.startDateId);var t=[this.startDateId,this.startCompareDateId,this.endDateId,this.endCompareDateId],n="";e==this.startDateId||e==this.endDateId?n=this.mOpts.theme+"_"+this.mOpts.selectCss:n=this.mOpts.theme+"_"+this.mOpts.compareCss,e==this.endDateId&&this.mOpts.singleCompare&&(n=this.mOpts.theme+"_"+this.mOpts.compareCss);for(var r in t)$("#"+t[r]).removeClass(this.mOpts.theme+"_"+this.mOpts.selectCss),$("#"+t[r]).removeClass(this.mOpts.theme+"_"+this.mOpts.compareCss);$("#"+e).addClass(n),$("#"+e).css("background-repeat","repeat"),this.dateInput=e},pickerDateRange.prototype.formatDate=function(e){return e.replace(/(\d{4})\-(\d{1,2})\-(\d{1,2})/g,function(e,t,n,r){return n<10&&(n="0"+n),r<10&&(r="0"+r),t+"-"+n+"-"+r})}